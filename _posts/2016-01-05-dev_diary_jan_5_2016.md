---
layout: post
title:  "[Dev Diary] Jan 05, 2016"
date:   2016-01-05
category: Dev-Diary
tags: 
- Dev-Diary
- GingaOne
- iOS
- AVFoundation
- UIImagePickerController
- AmazingCow
- Gosh
- Makefile
- make
- Imidiar
- Imidiar-PhotoTotem
- python
---

<!-- ----------------------------------------------------------------------- -->
<!-- ----------------------------------------------------------------------- -->

## Ginga.One

Mainly (and sadly) my work was pretty much try to understand the 
[AVFoundation](https://developer.apple.com/av-foundation/) 
framework.   
The application requires some custom camera preview that's not possible to do
with the more (**much more**) easier 
[UIImagePickerController](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImagePickerController_Class/)
framework.

I made a quick and dirt proof of concept and... that's all.   
(Of course I correct, enhanced, etc. some minor stuff that appeared on the way).


<!-- ----------------------------------------------------------------------- -->
<!-- ----------------------------------------------------------------------- -->

## Amazing Cow

[Gosh](http://www.github.com/amazingcow/gosh):

* I fixed a bug in the install target of ```makefile```   
Very briefly... The makefile was messing with the ```~/.bashrc``` 
(or ```~/.bash_profile```) of user, but since the make must be ran with ```sudo```
the ownership of the file was being modified to (```root.root```).   
I found that this could be correct by _saving_ the ownership of the file **before**
messing with it. This is described more deeply in this 
[post](https://n2omatt.github.io/study-diary/2016/01/05/how_get_a_ownership_of_file_in_linux.html).

<!-- ----------------------------------------------------------------------- -->
<!-- ----------------------------------------------------------------------- -->

## Imidiar

I hack the PhotoTotem code a bit.    
Mainly I did:

* Some refactoring in the methods that creates the UI buttons.
* Create a helper class named DictHelper that encapsulates the ```dict``` object
and let me ask for _optional_ and _required_ keys more easily.

So instead of do:

{% highlight python %}
someDict = ...
#Required.
if("someKey" not in someDict.keys()):
    Logger.log_fatal("Message");
else:
    someDict["someKey"]; #Use the value...

#Optional.
value = someDict["someKey"] if "someKey" in someDict.keys() else None;
{% endhighlight %}

I can do:

{% highlight python %}
someDict = ...
#Required.
value = someDict.value_or_die("someKey"); #Use the value, if not present log and die...

#Optional.
value = someDict.value_or_none("someKey"); #Use the value or return None.
{% endhighlight %}

Not very pythonic but works :)


